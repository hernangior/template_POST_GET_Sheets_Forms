<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Teste POST_GET</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" 
         rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
      <link rel="stylesheet" href="styles.css">
   </head>
   <body>

      <div class="container">
         <main>

            <div class="py-5 text-center">
               <img class="d-block mx-auto mb-4" src="assets/brand/bootstrap-logo.svg" alt="" width="72" height="57">
               <h2>Budget Test</h2>
               <div id="div_deploy_data">
                  &nbsp; - Deploy date: 19/06/2023 08:59 - success
               </div>
               <p class="lead">First Commit</p>
            </div>

            <form>
               <div class="row g-3">
                  <div class="col-sm-3">
                     <label for="firstName" class="form-label">Id</label>
                     <input type="text" class="form-control" id="firstName" placeholder="" value="" required>
                  </div>
                  <br>
                  <div class="col-sm-3">
                     <label for="firstName" class="form-label">Description</label>
                     <input type="text" class="form-control" id="firstName" placeholder="" value="" required>
                  </div>
               </div>
            </form>

            <hr class="my-4">
            <a class="w-100 btn btn-primary btn-lg" onclick="test()">SEND</a>
            
         </main>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" 
         integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
      <script src="main.js"></script>
      <script>
         function getData(){
             let url = 
             "https://docs.google.com/spreadsheets/d/e/"+
             "2PACX-1vTmm0nPchYTIJ8_"+
             "FaRiUVgRXb0a9Sy0jTMWFGfs_"+
             "F8o30bM1OD7a1_Z8Ra62BP6B1U50e35HSiZD3Wa/"+
             "pub?gid=0&single=true&output=csv";
             $.get(url, 
             function(data, status){
               if (status == "success"){
                   //console.log(status);
                   let i = 1;	
                   // get all data, separated in lines
                   var array_list = data.split("\r\n");
                   // search line by line e breaks fields
                   array_list.forEach((item) => {
                     console.log("# line "+i+"________________________");i++;
                     // when the fields are breakeds
                     var item_list = item.split(",");
                     item_list.forEach((item_) => {
                         console.table(item_);
                     });
                   });
                   document.getElementById("ajax_result").innerText = data
               }
             });
         };
             
         function test(){
             // list of fields
             var name      = "NAME";
             var email     = "EMAIL";
             var message   = "MESSAGE";
             var firstName = "FIRST NAME";
             // ajax for send request
             $.ajax({
                 type: "POST",
                 data: {
                     "entry.52904792"  : name,
                     "entry.1665733173": email,
                     "entry.1129926948": message,
                 },
                 cache: false,
                 url: 
                 "https://docs.google.com/forms/u/0/d/e/"+
                 "1FAIpQLScSb0xiEF75ZZwf9WGCbX6OSu6uhuM6LqP-iYrmbMaHjate-Q"+
                 "/formResponse",
                 success: function() {
                     // Success section
                     console.log('sucessfully send!');
                 },
                 error: function(error) {
                     if ((!error.responseText) && (!error.status)){
                         // Success section
                         console.log('sucessfully send!');
                     }else{
                         // Fail section
                         console.log('filed to send...');
                     }
                 },
             })
         };
         
      </script>
   </body>
</html>
